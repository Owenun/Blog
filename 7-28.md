### "到了成为中年人的时候，我变成了某种不好的人"

今天来记录一些something new。
先说说上次jyy的pmm的事情。
上次pmm把我整不会了。
首先是确实比较复杂，物理内存管理，或者叫堆区内存管理，不是很简单。其次，自己很久没写过代码了，比较急躁。应该先去看看资料，看看用什么样的方案来解决内存管理的问题，走前人走过的路。
后面看别人的代码(代码不完整，读起来巨难受)。
明确用下面几个设计思路。
  1. 设计fast path 和 slow path。 fast path 负责小而频繁的内存。 slow path 负责 大而罕见的内存。
  2. 使用slabs 和 buddy system 结合的方案
  3. 使用循环链表管理slabs内存块，buddys system 同样也是
  4. 使用类似bitmap的机制管理内存页面。在内存开始处设置chunks数组，将内存按4kb分页，每页认为对应chunks数组的一个元素。使用特定的api，来管理页面与slabs和buddys链表的关系。

还有其它一些问题还没解决。上锁，测试等等。

ok。上面的都over。下面记录一些something new。
起床很晚。
没吃早餐，但把午餐当早餐吃，煮了一碗粥。
看了tcp原理视频。草草的看，了解一个大概原理。明天继续。
又看了一遍jyy关于调试原理的视频。
我在思考。Ok，我有看了一遍，我得到了什么。
调试好像是一个很大的话题，而且很抽象。不是理论知识，会就是会。也不纯纯的实践技能。它有一定原理在里面。
所以到底什么是调试？又该怎么调试？
调试第一步，是写出比较好的代码。方方面面已经通过了数学推演，把错误尽可能排除在外。然后再考虑失误，缺陷等等。
所以链条是
需求-设计-代码-Fault-Error-Failure。
众所周知的是，调试原理是二分法，在正确与错误的状态之间切分，不断逼近，直到找到Fault。
原理就是这样，我想思考一些实践性很强的一些判断。
前提是代码设计大差不差（如果代码模型的数学性是错误，开始写很多代码是错误的方式）
- 完备的代码，不是随随便便写的
- 要一个趁手的工具，可能是gdb，或者是vscode
- 对状态机的状态的掌握。显然状态是不明显的，所以通过要某些方式来显示状态。可能是日志
- 不相信代码，在代码中加入很多assert。一旦出现Fault，快速Failure
- 还有一些工具的使用。strace(帮助理解程序运行做了那些事)。检查内存访问越界。


调试理论。感觉是一个很大的话题。我感觉我的任何判断都可能不是准确的，所以不再下结论。

jyy说，--成为中年人，到了上有老下有小的时候，变成了某种不好的人---
他知道要学新的东西，看看vscode的新特性，看vim新的key bind。
可是因为某种压力，变成了“道理都懂，啥都不会”的键盘侠。

我还不是中年人，但和这种描述很像。
变成了某种不好的人，变成了键盘侠。

上面就是jyy课上的记录和一些想法。

这一天，还干了啥？

吃完饭去月亮湾走了一圈。
看太阳一点一点掉入地平线，天边云彩红透。
这地方以后要多去。
强身健体吧，走走路，骑骑车，也不因为什么（真的不是闲得慌）。










     
